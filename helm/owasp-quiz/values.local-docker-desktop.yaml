# Values for Docker Desktop Kubernetes using locally built images

# Use locally built images
image:
  backend: owasp-quiz-backend:latest
  frontend: owasp-quiz-frontend:latest
  pullPolicy: IfNotPresent

replicaCount:
  backend: 1
  frontend: 1

ingress:
  enabled: true
  className: nginx
  # RFC 6761: any *.localhost resolves to 127.0.0.1
  host: quiz.localhost
  # Use NGINX Ingress Controller's default fake certificate locally
  tls:
    enabled: false
    secretName: quiz-localhost-tls
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    # Upstreams use self-signed certs in pods; disable verify for local dev
    nginx.ingress.kubernetes.io/proxy-ssl-verify: "false"

# Enable Kubernetes Dashboard with ingress at k8s.localhost
kubernetes-dashboard:
  enabled: true
  ingress:
    enabled: true
    className: nginx
    hosts:
      - k8s.localhost
    annotations:
      kubernetes.io/ingress.class: nginx
      # Allow HTTP for local dashboard access to avoid TLS issues
      nginx.ingress.kubernetes.io/force-ssl-redirect: "false"
      nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
  serviceAccount:
    create: true
    name: admin-user

# Optional local-only ingress for the standalone dashboard release (kdash)
# This creates an Ingress to service `kdash-kong-proxy` at host k8s.localhost
localDashboardIngress:
  enabled: true
